<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
     
    <title>blog.10rane.com  | Posts</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
     <meta name="generator" content="Hugo 0.27.1" />
      
      
        <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
      

     <link href='http://tatsuyano.github.io/dist/main.css' rel='stylesheet' type="text/css" />

     
      <link href="http://tatsuyano.github.io/post/index.xml" rel="alternate" type="application/rss+xml" title="blog.10rane.com" />
      <link href="http://tatsuyano.github.io/post/index.xml" rel="feed" type="application/rss+xml" title="blog.10rane.com" />
      

      <meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://tatsuyano.github.io/post/" />



<meta property="og:updated_time" content="2014-08-04T01:00:00&#43;09:00"/>










<meta itemprop="name" content="Posts">
<meta itemprop="description" content="">

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content=""/>

  </head>

  <body class="ma0 avenir bg-near-white">

    

  
  
  <header class="cover bg-top" style="background-image: url('http://tatsuyano.github.io/images/gohugo-default-sample-hero-image.jpg');">
    <div class="bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://tatsuyano.github.io" class="f3 fw2 hover-white no-underline white-90 dib">
      blog.10rane.com
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="http://tatsuyano.github.io/" title="home page">
              home
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="http://tatsuyano.github.io/post" title="Archives page">
              Archives
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="http://tatsuyano.github.io/tags" title="Tags page">
              Tags
            </a>
          </li>
          
        </ul>
      
      






    </div>
  </div>
</nav>

      <div class="tc-l pv4 pv6-l ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 white-90 mb0 lh-title">
          Posts
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
  <article class="pa3 pa4-ns nested-copy-line-height nested-img">
  <main class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray">
    
  </main>
    
    <section class="flex-ns flex-wrap justify-around mt5">
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        August 4, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/08/04/autojump-to-z/" class="link black dim">
        autojumpからzに乗り換えた
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
       autojumpを今まで使っていたが、zshrcを編集していたらエラーを吐くようになったので、 このタイミングでzに乗り換えてみた
インストール $ cd .dotfile git clone https://github.com/rupa/z.git .zsh  .zshrc
_Z_CMD=j source ~/.dotfile/.zsh/z.sh precmd() { _z --add &quot;$(pwd -P)&quot; }  キーバインドはjに変更。 ホーム直下に.zというファイルが作成され、そのファイルに履歴が溜まっていく
 z AUTOJUMPよりZ.SHのほうがPYTHONなしで動いて良いよ  
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 29, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/29/fuelphp-validation/" class="link black dim">
        fuelphpのエラー文言を日本語化する
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      config.phpに設定を追加 app/config/config.php
//'language' =&gt; 'en', // Default language //'language_fallback' =&gt; 'en', // Fallback language when file isn't available for default language //'locale' =&gt; 'en_US', // PHP set_locale() setting, null to not set 'language' =&gt; 'ja', 'language_fallback' =&gt; 'en', 'locale' =&gt; 'ja_JP.UTF-8',  langディレクトリに日本語用のディレクトリを作成 mkdir app/lang/ja touch app/lang/ja/validation.php  validation.phpの設定は core/lang/en/validation.php を参照 設定されているkey(メソッド)は、core/classes/validation.phpで設定されている
&lt;?php return array( 'required' =&gt; '「:label」は必須です', 'min_length' =&gt; '「:label」は:param:1文字以上で入力してください', 'max_length' =&gt; '「:label」は:param:1文字以内で入力してください', 'exact_length' =&gt; '「:label」は:param:1文字で入力してください', 'match_value' =&gt; '「:label」は「:param:1」と一致していません', 'match_pattern' =&gt; '「:label」はパターン「:param:1」と一致しません', 'match_field' =&gt; '「:label」は「:param:1」と一致していません', 'valid_email' =&gt; '「:label」はメールアドレスが不正です', 'valid_emails' =&gt; '「:label」に不正なメールアドレスが含まれてます', 'valid_url' =&gt; '「:label」は不正なURLです', 'valid_ip' =&gt; '「:label」は不正なIPアドレスです', 'numeric_min' =&gt; '「:label」は:param:1以上で入力してください', 'numeric_max' =&gt; '「:label」は:param:1以内で入力してください', 'valid_string' =&gt; '「:label」は:param:1で入力する必要があります', );  自前のvalidation(helperクラス)を作成する mkdir app/classes/helper touch app/classes/helper/myvalidation.
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 29, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/29/fuelphp-use-agent-class/" class="link black dim">
        fuelphpでAgentClassを設定する
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
       ブラウザの識別やモバイルフォンとPCの識別をするには、fuelではAgentクラスを使用する。
AgentクラスはPHPのget_browser関数を利用する。
get_browser関数は、UA情報をBrowser Capabilities Projectというサイトから取得する。 fuelではこのサイトからUA情報を取得(キャッシュ化し2回目のアクセスからキャッシュを参照)し、識別する。
configファイルにUA情報(サイト)の取得先URLなどを設定 fuel/app/config/config.php
'browscap' =&gt; array( 'enabled' =&gt; true, 'url' =&gt; 'http://browsers.garykeith.com/stream.asp?BrowsCapINI', 'method' =&gt; 'wrapper', 'file' =&gt; '/tmp/php_browscap.ini', ),  キャッシュの保存先について fuelでは fuel/app/cache にキャシュを保存している
cache └── fuel └── agent ├── browscap.cache └── browscap_file.cache  キャッシュ周りで権限エラーがでたので、権限を777にする
chmod -R 777 fuel/app/cache/  Agentクラスの実装 Agent::is_mobiledevice();  参考サイト  FuelPHPのAgentクラスと拡張 Agent Class FuelPHPのAgentクラスによる端末振り分けが簡単すぎる  関連する記事  fuelphpのエラー文言を日本語化する fuelphpでredisを使う  
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 29, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/29/install-daemontools/" class="link black dim">
        daemontoolsのインストール
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      ダウンロード
# mkdir -p /package # chmod 1755 /package # cd /package # wget http://cr.yp.to/daemontools/daemontools-0.76.tar.gz # tar zxvf daemontools-0.76.tar.gz  インストールスクリプトの修正
/package/admin/daemontools-0.76/src/conf-cc
gcc -O2 -Wimplicit -Wunused -Wcomment -Wchar-subscripts -Wuninitialized -Wshadow -Wcast-qual -Wcast-align -Wwrite-strings #&lt;- 削除 gcc -O2 --include /usr/include/errno.h #&lt;-書き換え  インストール
# cd /admin/daemontools-0.76 # /package/install  daemontools本体の起動設定 /etc/init/svscan.conf
start on runlevel [12345] respawn exec /usr/local/bin/svscanboot   CentOS6.4にmemcachedを入れた。 memcachedの運用と互換アプリケーション 私家版 daemontools FAQ) 3. トラブルシューティング
  daemontoolsのコマンド ややこしいのですが、実際のコマンドは、/package/admin/daemontools/commandにあります。
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 29, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/29/install-memcached/" class="link black dim">
        memcachedのインストール
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      まずはyumでmemcachedのインストール
# yum install -y memcached memcached-devel  libmemcachedのインストール
 最新のソース  # cd /usr/local/src # wget https://launchpad.net/libmemcached/1.0/1.0.18/+download/libmemcached-1.0.18.tar.gz # tar xvzf libmemcached-1.0.18.tar.gz # ./configure # make # make install  /etc/sysconfig/memcached
PORT=&quot;11211&quot; USER=&quot;apache&quot; MAXCONN=&quot;1024&quot; CACHESIZE=&quot;64&quot; OPTIONS=&quot;&quot;  PHPで使うために以下の設定 # yum install -y php-pecl-memcached  PHP Extensionのインストール
# git clone https://github.com/php-memcached-dev/php-memcached.git # cd php-memcached # phpize # ./configure --with-libmemcached-dir=/usr/local # make # make install  PHPで設定が有効になっているか確認
$ php -i | grep memcached memcached memcached support =&gt; enabled libmemcached version =&gt; 1.
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 28, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/28/use-the-redis-in-fuelphp/" class="link black dim">
        fuelphpでredisを使う
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      まずはredisのインストールから
$ yum --enablerepo=epel install -y redis $ /etc/init.d/redis start redis-server を起動中: [ OK ]  confの場所
$ emacs /etc/redis.conf  redisが正常にインストールされているか確認
$ redis-cli redis 127.0.0.1:6379&gt; set name 'hoge' OK redis 127.0.0.1:6379&gt; get name &quot;hoge&quot;  保存されているKEYを表示
$ redis-cli redis 127.0.0.1:6379&gt; KEYS * 1) &quot;particles&quot; 2) &quot;name&quot; redis 127.0.0.1:6379&gt;  fuelphpの設定 config/db.php
'redis' =&gt; array( 'default' =&gt; array( 'hostname' =&gt; '127.0.0.1', 'port' =&gt; 6379 ) ),  config.session.php
'driver' =&gt; 'redis', .
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 28, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/28/e_ristrict-is-added-to-the-e_all/" class="link black dim">
        PHP5.4から error_reportingのE_ALLにE_RISTRICTが加わった
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
       fuelphp案件でcomposer経由でxml_rpc2をインストールしたら、以下のようなエラーが出た
Uncaught exception Fuel\Core\PhpErrorException: Non-static method PEAR::loadExtension() should not be called statically  最初はソースの依存関係が原因かなあと思ったが、調べてみるとそうではなく PHP5.4から error_reportingのE_ALLにE_RISTRICTが加わったことで、エラーと判定されるようになった
 php5.4からはerror_reportingのE_ALLにE_RISTRICTが含まれる PHPでHTML上にエラー表示/非表示する php.ini 設定  対象箇所でのみerror_reportingを止めることにした production環境以外で、かつ一部分でのみerror_reportingを止めたかったので、対象箇所の前後で一時的に解除した
$before_level = error_reporting(0); // error_report解除 $options = array('prefix' =&gt; 'package.'); $client = \XML_RPC2_Client::create('http://pear.php.net/xmlrpc.php', $options); $result = $client-&gt;info('XML_RPC2'); print_r($result); error_reporting($before_level); // error_reportを元に戻す   error_reporting 定義済み定数  
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 28, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/28/reinstall-mysql56/" class="link black dim">
        mysqlを5.1-&gt;5.6に再インストールする
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      CentOS6の標準のyumでMysqlをインストールすると、バージョンが5.1だったので、再度yumで5.6を入れなおす。
mysql5.6の性能  MySQL 5.6での機能強化点 - パフォーマンスと使い勝手を大きく向上 開発スピードアクセル全開ぶっちぎり！日本よ、これがMySQL 5.6だッ！！ MySQL 5.1-&gt;5.6のmy.cnfの差分とか  yumでインストールしたmysqlのパッケージの確認 $ rpm -qa | grep mysql mysql-libs-5.1.73-3.el6_5.x86_64 mysql-server-5.1.73-3.el6_5.x86_64 php-mysqlnd-5.5.10-1.el6.remi.1.x86_64 # &lt;- これはphp5.5のパッケージ mysql-5.1.73-3.el6_5.x86_64  依存関係の解消 ただmysql-libsはcronやpostfixが使用しているため、先に依存関係を解消する必要がある
$ wget ftp://ftp.jaist.ac.jp/pub/mysql//Downloads/MySQL-5.6/MySQL-shared-compat-5.6.17-1.el6.x86_64.rpm $ rpm -Uvh MySQL-shared-compat-5.6.17-1.el6.x86_64.rpm 準備中... ########################################### [100%] 1:MySQL-shared-compat ########################################### [100%] 警告: /etc/my.cnf は /etc/my.cnf.rpmsave として保存されました。  MySQL-shared-compatは、mysql-libsと同等のライブラリを提供し、mysql-libsを置き換えてくれる
パッケージの削除 yum remove mysql*  削除されたパッケージ
========================== Package ========================= Removing: mysql mysql-community-release mysql-server Transaction Summary ========================== Remove 3 Package(s)   CentOS6.
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 21, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/21/install-vagrant-aws-plugin/" class="link black dim">
        vagrant-aws-pluginをインストール
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      vagrant-awsプラグインを使うことで、コマンドラインで インスタンスの作成、起動ができるようになります。
vagrant-aws(plugin)のインストール $ vagrant plugin install vagrant-aws Installing the 'vagrant-aws' plugin. This can take a few minutes... Installed the plugin 'vagrant-aws (0.4.1)'!  インストールされているpluginの確認 $ vagrant plugin list vagrant-aws (0.4.1) vagrant-login (1.0.1, system) vagrant-share (1.0.1, system)  BOXのインストール $ vagrant box add dummy https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box ==&gt; box: Adding box 'dummy' (v0) for provider: box: Downloading: https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box ==&gt; box: Successfully added box 'dummy' (v0) for 'aws'! $ vagrant box list chef/centos-6.
    </div>
  </div>

        </div>
      
        <div class="relative w-100 w-30-l mb4 bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 21, 2014
      </div>
    
    <h1 class="f3 near-black">
      <a href="http://tatsuyano.github.io/2014/07/21/start-aws/" class="link black dim">
        aws はじめました。
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      現在AWSの無料キャンペーンをやっているので、試してみました。
AWSのアカウント作成 こちらAmazonのサイトに詳細な説明があるので、省略。
 無料アカウント作成の流れ  インスタンスの作成 まずはEC2のコンソール画面を開きます。 REGIONの選択 レスポンスが気になるので、REGIONは「Tokyo」に。真ん中あたりの「Launch Instance」で作成画面に遷移します。 Image(AMI)の選択 「Free tier only」が無料Image(AMI)なので、「Amazon Linux」を選択。 Instanceの選択 こちらも無料の「Micro instances」を選択。 InstanceにTagをつける とりあえず Name というkeyに、「amz_tokyo」というvalueをつけました。 firewallの設定 allow(許可)の条件を設定する模様。固定IPがあるので、SSHにIPを指定します。 とりあえずHTTPとping(Custom ICMP Rule)も設定しました。 秘密鍵の作成、及びダウンロード 最後に秘密鍵を作成しダウンロードします。 DLした秘密鍵のpermissionを600にしてください。
$ chmod 600 .ssh/amz_tokyo.pem  DNS経由で、ssh接続 ユーザは「ec2-user」、接続先IPは、public DNSのURLを指定します。 $ ssh -i .ssh/amz_tokyo.pem ec2-user@ec2-xxxx-xxxx-.ap-northeast-1.compute.amazonaws.com   __| __|_ ) _| ( / Amazon Linux AMI ___|\___|___|  DNSから固定IP(Elastic Ips)に変更する Elastic Ips(EIP)の料金について インスタンスが「起動」しているIPに対してEIPを割り当てても無料だが、 「停止」しているインスタンスに対して、EIPを割り当てたまま放置しておくと1hに$0.01課金されるので注意。
Instanceを指定し、固定IPと紐付ける firewallの再設定 固定IPに変更したので、先ほど設定したfirewallの設定が再度行う。
 EC2でpingを許可する  pingでレスポンスの測定 「Tokyo」以外のREGIONと比較しないと意味がないが、計測方法をメモ。 下記のコマンドは 64byteのリクエストを10回投げて、レスポンスが帰ってくるまで計測結果。
    </div>
  </div>

        </div>
      
    </section>
    

<ul class="pagination">
    
    <li>
        <a href="http://tatsuyano.github.io/post/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li
    >
    <a href="http://tatsuyano.github.io/post/page/7/" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="http://tatsuyano.github.io/post/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="http://tatsuyano.github.io/post/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="http://tatsuyano.github.io/post/page/3/">3</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="disabled"><span aria-hidden="true">&hellip;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="http://tatsuyano.github.io/post/page/7/">7</a></li>
    
    
    
    
    
    
        
        
    
    
    <li
    class="active"><a href="http://tatsuyano.github.io/post/page/8/">8</a></li>
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="http://tatsuyano.github.io/post/page/9/">9</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="disabled"><span aria-hidden="true">&hellip;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    <li
    ><a href="http://tatsuyano.github.io/post/page/15/">15</a></li>
    
    
    <li
    >
    <a href="http://tatsuyano.github.io/post/page/9/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li>
        <a href="http://tatsuyano.github.io/post/page/15/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

  </article>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://tatsuyano.github.io" >
    &copy; 2017 blog.10rane.com
  </a>
  






  </div>
</footer>

    <script src="http://tatsuyano.github.io/dist/app.bundle.js" async></script>

  </body>
</html>
