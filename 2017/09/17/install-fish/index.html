<!DOCTYPE html>
<html lang="ja">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>fishをインストールする -- blog.10rane.com</title>

    

    
    <link href="http://tatsuyano.github.io/css/bootstrap.min.css" rel="stylesheet">

    
    <link href="http://tatsuyano.github.io/css/clean-blog.min.css" rel="stylesheet">

    
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    
    
    

</head>

<body>

    
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://tatsuyano.github.io">blog.10rane.com</a>
            </div>

                       
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li>
                        <a href="http://tatsuyano.github.io/">home</a>
                    </li>
                    
                    <li>
                        <a href="http://tatsuyano.github.io/post">Archives</a>
                    </li>
                    
                    <li>
                        <a href="http://tatsuyano.github.io/tags">Tags</a>
                    </li>
                    
                  </ul>
            </div>
           

        </div>
        
    </nav>


    
    
    <header class="intro-header" style="background-image: url('http://tatsuyano.github.io//img/about-bg.jpg')">
      
      <div class="container">
        <div class="row">
           <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
             <div class="post-heading">
               <h1>fishをインストールする</h1>
               <h2 class="subheading"></h2>
               <span class="meta">
                 
Posted by <a href="#">Tatsuyano</a> on Sun, Sep 17, 2017
<br />
In 

<br />
Tags <a href="http://tatsuyano.github.io/tags/fish">fish</a>, <a href="http://tatsuyano.github.io/tags/shell">shell</a>

               </span>
             </div>
           </div>
        </div>
      </div>
    </header>

    
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  

<p>macを新調したので、shellもzshからfishに乗り換えてみた。</p>

<h2 id="install-fish">Install fish</h2>

<pre><code class="language-shell">$ brew install fish

$ fish -v
fish, version 2.6.0
</code></pre>

<h2 id="fishをログインシェルにせず-bashから起動する">fishをログインシェルにせず、bashから起動する</h2>

<p>ログインシェルをfishにするとfishに問題があったときにterminalが動かなくなってしまうので、bash_profileから<code>exec fish</code>で起動する。
またanyenvがfishに完全に対応していないみたいなので、bashでanyenvを動かしてからfishを動かす。</p>

<pre><code class="language-shell">## HOME/.bash_profile
if [ -d $HOME/.anyenv ]; then
   export PATH=$HOME/.anyenv/bin:$PATH
   eval &quot;$(anyenv init -)&quot;
fi
exec fish
</code></pre>

<ul>
<li><a href="http://qiita.com/tak-onda/items/a90b63d9618d6b15c18c">ログインシェルはbashのままfishを利用する</a></li>
<li><a href="https://ja.stackoverflow.com/questions/33694/fish%E3%82%B7%E3%82%A7%E3%83%AB%E3%81%A7anyenv%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%ABcalled-during-startup%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E5%87%BA%E3%82%8B">fishシェルでanyenvを設定したときにcalled during startupエラーが出る</a></li>
</ul>

<h2 id="install-fisherman">Install fisherman</h2>

<p>はじめはOhMyFishをインストールしたが、調べた結果fishermanのほうがよさそうだったのでプラグインマネージャーはfishermanに。コマンドは<code>fisher</code></p>

<pre><code class="language-shell">$ curl -Lo ~/.config/fish/functions/fisher.fish --create-dirs https://git.io/fisher

$ fisher -v
fisherman version 2.13.1 ~/.config/fish/functions/fisher.fish
</code></pre>

<ul>
<li><a href="https://github.com/fisherman/fisherman">fisherman/fisherman</a></li>
<li><a href="http://futurismo.biz/archives/6079">oh-my-fish は古い！fisherman で置き換えられる</a></li>
<li><a href="http://qiita.com/ryotako/items/2d9d6fb646d2f3644dc8">fishのプラグインマネージャ比較</a></li>
</ul>

<p>テーマはOhMyFishのagnosterを選択。別のテーマに変更する場合は、再度installすると変更される。</p>

<pre><code class="language-shell">$ fisher install omf/theme-agnoster
</code></pre>

<p>pluginのインストール</p>

<pre><code class="language-shell">$ fisher install z 0rax/fish-bd edc/bass

$ fisher ls // themeの前には*が付く
* agnoster   await  bd  get   getopts   last_job_id   z   bass
</code></pre>

<ul>
<li><a href="http://futurismo.biz/archives/6087">fish ユーザなら入れておきたいプラグイン 13 選</a></li>
</ul>

<h2 id="alliasとfunctionを設定する">alliasとfunctionを設定する</h2>

<p>自分用のaliasとfunctionを<code>HOME/.config/fish/config.fish</code>に設定。</p>

<pre><code class="language-shell">## HOME/.config/fish/config.fish

# git alias
alias ga  &quot;git add&quot;
alias gd  &quot;git diff&quot;
alias gb  &quot;git branch&quot;
alias gco &quot;git checkout&quot;
alias gst &quot;git status&quot;

# colordiff or diff
set tmp (which colordiff) #実行結果を変数にsetすることで、標準出力に出力させないようにする
if test $status -eq 0
    alias diff &quot;colordiff -u&quot;
else
    alias diff &quot;diff -u&quot;
end

# tmux
function tmr
    tmux new -s $argv[1]; or tmux attach -d -t $argv[1]
end
</code></pre>

<h2 id="ctrl-f-のキーバインドを変える">Ctrl+F のキーバインドを変える</h2>

<p><code>Ctrl+F</code>でカーソルが動かないと思ったら、デフォルトだと<code>Ctrl+F</code>はautosuggestionがbindされている。</p>

<pre><code class="language-fish">bind \cf 'forward-word'
</code></pre>

<ul>
<li><a href="http://fish.rubikitch.com/bind/">bind キーバインドを設定・削除 使えるキーを一覧する</a></li>
<li><a href="https://fishshell.com/">fish shell main page</a></li>
<li><a href="http://fishshell.com/docs/current/index.html">Autosuggestions</a></li>
</ul>

<pre><code class="language-shell">## Autosuggestionsより抜粋
To accept the autosuggestion (replacing the command line contents), press right arrow or Control+F.
To accept the first suggested word, press Alt+→ or Alt+F. 
If the autosuggestion is not what you want, just ignore it: it won't execute unless you accept it.
</code></pre>

<h2 id="peco-ghqを入れる">peco &amp; ghqを入れる</h2>

<pre><code class="language-shell">$ brew install peco ghq
$ fisher install z decors/fish-ghq peco  yoshiori/fish-peco_select_ghq_repository
</code></pre>

<p>fishでhistory見るには<code>fish | history | peco</code>みたいなコマンドで実行する。下記のサイトを参考にfunctionにした。</p>

<pre><code class="language-shell">function peco_select_history
    if test (count $argv) = 0
        set peco_flags
    else
        set peco_flags --query &quot;$argv&quot;
    end
    history|peco $peco_flags|read foo
    if [ $foo ]
        commandline $foo
    else
        commandline ''
    end
end

# keybinding for peco
function fish_user_key_bindings
    bind \cs peco_select_ghq_repository
    bind \cr peco_select_history # Bind for peco select history to Ctrl+R
end
</code></pre>

<ul>
<li><a href="https://blog.craftz.dog/%E3%82%84%E3%81%A3%E3%81%B1%E3%82%8A%E8%89%AF%E3%81%8B%E3%81%A3%E3%81%9Fpeco-ghq-4eb57aeda33e">やっぱり良かったpeco + ghq</a></li>
</ul>

<h2 id="その他参考サイト">その他参考サイト</h2>

<ul>
<li><a href="https://www.hsbt.org/diary/20170421.html">zsh から fish にした</a></li>
<li><a href="http://dev.classmethod.jp/etc/fish-shell-life/">fish shell を使いたい人生だった</a></li>
<li><a href="http://qiita.com/susieyy/items/ac2133e249f252dc9a34">詳解 fishでモダンなシェル環境の構築</a></li>
<li><a href="https://blog.nijohando.jp/post/starting-fishshell/">fish shellを使う</a></li>
</ul>

                  

                </div>
            </div>
        </div>
    </article>

    <hr>
    
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <ul class="list-inline text-center">
                    
                    
                    <li>
                      <a href="https://github.com/tatsuyano">
                        <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                        </span>
                      </a>
                    </li>
                    
                  </ul>
                  <p class="copyright text-muted"></p>
                </div>
            </div>
        </div>
    </footer>

    
    <script src="http://tatsuyano.github.io/js/jquery.min.js"></script>

    
    <script src="http://tatsuyano.github.io/js/bootstrap.min.js"></script>

    
    <script src="http://tatsuyano.github.io/js/clean-blog.js"></script>

    

</body>

</html>

